/*
 * OLED.c
 *
 * Created: 19.09.2018 10:07:50
 *  Author: torbjfug
 */ 


#include "oled.h"


void oled_data_write(uint8_t data);
void oled_control_write(uint8_t data);


#define FONT_SIZE_LARGE 0
#define FONT_SIZE_MEDIUM 1
#define FONT_SIZE_SMALL 2

#include <avr/pgmspace.h>

// Font 8x8 - Large
const unsigned char PROGMEM font8[95][8] = {
	{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000}, //
	{0b00000000,0b00000110,0b01011111,0b01011111,0b00000110,0b00000000,0b00000000,0b00000000}, // !
	{0b00000000,0b00000111,0b00000111,0b00000000,0b00000111,0b00000111,0b00000000,0b00000000}, // "
	{0b00010100,0b01111111,0b01111111,0b00010100,0b01111111,0b01111111,0b00010100,0b00000000}, // #
	{0b00100100,0b00101110,0b01101011,0b01101011,0b00111010,0b00010010,0b00000000,0b00000000}, // $
	{0b01000110,0b01100110,0b00110000,0b00011000,0b00001100,0b01100110,0b01100010,0b00000000}, // %
	{0b00110000,0b01111010,0b01001111,0b01011101,0b00110111,0b01111010,0b01001000,0b00000000}, // &
	{0b00000100,0b00000111,0b00000011,0b00000000,0b00000000,0b00000000,0b00000000,0b00000000}, // '
	{0b00000000,0b00011100,0b00111110,0b01100011,0b01000001,0b00000000,0b00000000,0b00000000}, // (
	{0b00000000,0b01000001,0b01100011,0b00111110,0b00011100,0b00000000,0b00000000,0b00000000}, // )
	{0b00001000,0b00101010,0b00111110,0b00011100,0b00011100,0b00111110,0b00101010,0b00001000}, // *
	{0b00001000,0b00001000,0b00111110,0b00111110,0b00001000,0b00001000,0b00000000,0b00000000}, // +
	{0b00000000,0b10100000,0b11100000,0b01100000,0b00000000,0b00000000,0b00000000,0b00000000}, // ,
	{0b00001000,0b00001000,0b00001000,0b00001000,0b00001000,0b00001000,0b00000000,0b00000000}, // -
	{0b00000000,0b00000000,0b01100000,0b01100000,0b00000000,0b00000000,0b00000000,0b00000000}, // .
	{0b01100000,0b00110000,0b00011000,0b00001100,0b00000110,0b00000011,0b00000001,0b00000000}, // /
	{0b00111110,0b01111111,0b01011001,0b01001101,0b01111111,0b00111110,0b00000000,0b00000000}, // 0
	{0b01000010,0b01000010,0b01111111,0b01111111,0b01000000,0b01000000,0b00000000,0b00000000}, // 1
	{0b01100010,0b01110011,0b01011001,0b01001001,0b01101111,0b01100110,0b00000000,0b00000000}, // 2
	{0b00100010,0b01100011,0b01001001,0b01001001,0b01111111,0b00110110,0b00000000,0b00000000}, // 3
	{0b00011000,0b00011100,0b00010110,0b00010011,0b01111111,0b01111111,0b00010000,0b00000000}, // 4
	{0b00100111,0b01100111,0b01000101,0b01000101,0b01111101,0b00111001,0b00000000,0b00000000}, // 5
	{0b00111100,0b01111110,0b01001011,0b01001001,0b01111001,0b00110000,0b00000000,0b00000000}, // 6
	{0b00000011,0b01100011,0b01110001,0b00011001,0b00001111,0b00000111,0b00000000,0b00000000}, // 7
	{0b00110110,0b01111111,0b01001001,0b01001001,0b01111111,0b00110110,0b00000000,0b00000000}, // 8
	{0b00000110,0b01001111,0b01001001,0b01101001,0b00111111,0b00011110,0b00000000,0b00000000}, // 9
	{0b00000000,0b00000000,0b01101100,0b01101100,0b00000000,0b00000000,0b00000000,0b00000000}, // :
	{0b00000000,0b10100000,0b11101100,0b01101100,0b00000000,0b00000000,0b00000000,0b00000000}, // ;
	{0b00001000,0b00011100,0b00110110,0b01100011,0b01000001,0b00000000,0b00000000,0b00000000}, // <
	{0b00010100,0b00010100,0b00010100,0b00010100,0b00010100,0b00010100,0b00000000,0b00000000}, // =
	{0b00000000,0b01000001,0b01100011,0b00110110,0b00011100,0b00001000,0b00000000,0b00000000}, // >
	{0b00000010,0b00000011,0b01010001,0b01011001,0b00001111,0b00000110,0b00000000,0b00000000}, // ?
	{0b00111110,0b01111111,0b01000001,0b01011101,0b01011101,0b00011111,0b00011110,0b00000000}, // @
	{0b01111100,0b01111110,0b00010011,0b00010011,0b01111110,0b01111100,0b00000000,0b00000000}, // A
	{0b01000001,0b01111111,0b01111111,0b01001001,0b01001001,0b01111111,0b00110110,0b00000000}, // B
	{0b00011100,0b00111110,0b01100011,0b01000001,0b01000001,0b01100011,0b00100010,0b00000000}, // C
	{0b01000001,0b01111111,0b01111111,0b01000001,0b01100011,0b01111111,0b00011100,0b00000000}, // D
	{0b01000001,0b01111111,0b01111111,0b01001001,0b01011101,0b01000001,0b01100011,0b00000000}, // E
	{0b01000001,0b01111111,0b01111111,0b01001001,0b00011101,0b00000001,0b00000011,0b00000000}, // F
	{0b00011100,0b00111110,0b01100011,0b01000001,0b01010001,0b01110011,0b01110010,0b00000000}, // G
	{0b01111111,0b01111111,0b00001000,0b00001000,0b01111111,0b01111111,0b00000000,0b00000000}, // H
	{0b00000000,0b01000001,0b01111111,0b01111111,0b01000001,0b00000000,0b00000000,0b00000000}, // I
	{0b00110000,0b01110000,0b01000000,0b01000001,0b01111111,0b00111111,0b00000001,0b00000000}, // J
	{0b01000001,0b01111111,0b01111111,0b00001000,0b00011100,0b01110111,0b01100011,0b00000000}, // K
	{0b01000001,0b01111111,0b01111111,0b01000001,0b01000000,0b01100000,0b01110000,0b00000000}, // L
	{0b01111111,0b01111111,0b00000110,0b00001100,0b00000110,0b01111111,0b01111111,0b00000000}, // M
	{0b01111111,0b01111111,0b00000110,0b00001100,0b00011000,0b01111111,0b01111111,0b00000000}, // N
	{0b00011100,0b00111110,0b01100011,0b01000001,0b01100011,0b00111110,0b00011100,0b00000000}, // O
	{0b01000001,0b01111111,0b01111111,0b01001001,0b00001001,0b00001111,0b00000110,0b00000000}, // P
	{0b00011110,0b00111111,0b00100001,0b01110001,0b01111111,0b01011110,0b00000000,0b00000000}, // Q
	{0b01000001,0b01111111,0b01111111,0b00011001,0b00111001,0b01101111,0b01000110,0b00000000}, // R
	{0b00100110,0b01100111,0b01001101,0b01011001,0b01111011,0b00110010,0b00000000,0b00000000}, // S
	{0b00000011,0b01000001,0b01111111,0b01111111,0b01000001,0b00000011,0b00000000,0b00000000}, // T
	{0b01111111,0b01111111,0b01000000,0b01000000,0b01111111,0b01111111,0b00000000,0b00000000}, // U
	{0b00011111,0b00111111,0b01100000,0b01100000,0b00111111,0b00011111,0b00000000,0b00000000}, // V
	{0b01111111,0b01111111,0b00110000,0b00011000,0b00110000,0b01111111,0b01111111,0b00000000}, // W
	{0b01100011,0b01110111,0b00011100,0b00001000,0b00011100,0b01110111,0b01100011,0b00000000}, // X
	{0b00000111,0b01001111,0b01111000,0b01111000,0b01001111,0b00000111,0b00000000,0b00000000}, // Y
	{0b01100111,0b01110011,0b01011001,0b01001101,0b01000111,0b01100011,0b01110001,0b00000000}, // Z
	{0b00000000,0b01111111,0b01111111,0b01000001,0b01000001,0b00000000,0b00000000,0b00000000}, // [
	{0b00000001,0b00000011,0b00000110,0b00001100,0b00011000,0b00110000,0b01100000,0b00000000}, // "\"
	{0b00000000,0b01000001,0b01000001,0b01111111,0b01111111,0b00000000,0b00000000,0b00000000}, // ]
	{0b00001000,0b00001100,0b00000110,0b00000011,0b00000110,0b00001100,0b00001000,0b00000000}, // ^
	{0b10000000,0b10000000,0b10000000,0b10000000,0b10000000,0b10000000,0b10000000,0b10000000}, // _
	{0b00000000,0b00000000,0b00000011,0b00000111,0b00000100,0b00000000,0b00000000,0b00000000}, // `
	{0b00100000,0b01110100,0b01010100,0b01010100,0b00111100,0b01111000,0b01000000,0b00000000}, // a
	{0b01000001,0b00111111,0b01111111,0b01000100,0b01000100,0b01111100,0b00111000,0b00000000}, // b
	{0b00111000,0b01111100,0b01000100,0b01000100,0b01101100,0b00101000,0b00000000,0b00000000}, // c
	{0b00110000,0b01111000,0b01001000,0b01001001,0b00111111,0b01111111,0b01000000,0b00000000}, // d
	{0b00111000,0b01111100,0b01010100,0b01010100,0b01011100,0b00011000,0b00000000,0b00000000}, // e
	{0b01001000,0b01111110,0b01111111,0b01001001,0b00000011,0b00000010,0b00000000,0b00000000}, // f
	{0b10011000,0b10111100,0b10100100,0b10100100,0b11111000,0b01111100,0b00000100,0b00000000}, // g
	{0b01000001,0b01111111,0b01111111,0b00001000,0b00000100,0b01111100,0b01111000,0b00000000}, // h
	{0b00000000,0b01000100,0b01111101,0b01111101,0b01000000,0b00000000,0b00000000,0b00000000}, // i
	{0b01000000,0b11000100,0b10000100,0b11111101,0b01111101,0b00000000,0b00000000,0b00000000}, // j
	{0b01000001,0b01111111,0b01111111,0b00010000,0b00111000,0b01101100,0b01000100,0b00000000}, // k
	{0b00000000,0b01000001,0b01111111,0b01111111,0b01000000,0b00000000,0b00000000,0b00000000}, // l
	{0b01111100,0b01111100,0b00001100,0b00011000,0b00001100,0b01111100,0b01111000,0b00000000}, // m
	{0b01111100,0b01111100,0b00000100,0b00000100,0b01111100,0b01111000,0b00000000,0b00000000}, // n
	{0b00111000,0b01111100,0b01000100,0b01000100,0b01111100,0b00111000,0b00000000,0b00000000}, // o
	{0b10000100,0b11111100,0b11111000,0b10100100,0b00100100,0b00111100,0b00011000,0b00000000}, // p
	{0b00011000,0b00111100,0b00100100,0b10100100,0b11111000,0b11111100,0b10000100,0b00000000}, // q
	{0b01000100,0b01111100,0b01111000,0b01000100,0b00011100,0b00011000,0b00000000,0b00000000}, // r
	{0b01001000,0b01011100,0b01010100,0b01010100,0b01110100,0b00100100,0b00000000,0b00000000}, // s
	{0b00000000,0b00000100,0b00111110,0b01111111,0b01000100,0b00100100,0b00000000,0b00000000}, // t
	{0b00111100,0b01111100,0b01000000,0b01000000,0b00111100,0b01111100,0b01000000,0b00000000}, // u
	{0b00011100,0b00111100,0b01100000,0b01100000,0b00111100,0b00011100,0b00000000,0b00000000}, // v
	{0b00111100,0b01111100,0b01100000,0b00110000,0b01100000,0b01111100,0b00111100,0b00000000}, // w
	{0b01000100,0b01101100,0b00111000,0b00010000,0b00111000,0b01101100,0b01000100,0b00000000}, // x
	{0b10011100,0b10111100,0b10100000,0b10100000,0b11111100,0b01111100,0b00000000,0b00000000}, // y
	{0b01001100,0b01100100,0b01110100,0b01011100,0b01001100,0b01100100,0b00000000,0b00000000}, // z
	{0b00001000,0b00001000,0b00111110,0b01110111,0b01000001,0b01000001,0b00000000,0b00000000}, //
	{0b00000000,0b00000000,0b00000000,0b01110111,0b01110111,0b00000000,0b00000000,0b00000000}, // |
	{0b01000001,0b01000001,0b01110111,0b00111110,0b00001000,0b00001000,0b00000000,0b00000000}, //
	{0b00000010,0b00000011,0b00000001,0b00000011,0b00000010,0b00000011,0b00000001,0b00000000} // ~
};

// Font 5x7 - normal
const unsigned char PROGMEM font5[95][5] = {
	{0b00000000,0b00000000,0b00000000,0b00000000,0b00000000}, //
	{0b00000000,0b00000000,0b01011111,0b00000000,0b00000000}, // !
	{0b00000000,0b00000111,0b00000000,0b00000111,0b00000000}, // "
	{0b00010100,0b01111111,0b00010100,0b01111111,0b00010100}, // #
	{0b00100100,0b00101010,0b01111111,0b00101010,0b00010010}, // $
	{0b00100011,0b00010011,0b00001000,0b01100100,0b01100010}, // %
	{0b00110110,0b01001001,0b01010101,0b00100010,0b01010000}, // &
	{0b00000000,0b00000101,0b00000011,0b00000000,0b00000000}, // '
	{0b00000000,0b00011100,0b00100010,0b01000001,0b00000000}, // (
	{0b00000000,0b01000001,0b00100010,0b00011100,0b00000000}, // )
	{0b00001000,0b00101010,0b00011100,0b00101010,0b00001000}, // *
	{0b00001000,0b00001000,0b00111110,0b00001000,0b00001000}, // +
	{0b00000000,0b01010000,0b00110000,0b00000000,0b00000000}, // ,
	{0b00001000,0b00001000,0b00001000,0b00001000,0b00001000}, // -
	{0b00000000,0b01100000,0b01100000,0b00000000,0b00000000}, // .
	{0b00100000,0b00010000,0b00001000,0b00000100,0b00000010}, // /
	{0b00111110,0b01010001,0b01001001,0b01000101,0b00111110}, // 0
	{0b00000000,0b01000010,0b01111111,0b01000000,0b00000000}, // 1
	{0b01000010,0b01100001,0b01010001,0b01001001,0b01000110}, // 2
	{0b00100001,0b01000001,0b01000101,0b01001011,0b00110001}, // 3
	{0b00011000,0b00010100,0b00010010,0b01111111,0b00010000}, // 4
	{0b00100111,0b01000101,0b01000101,0b01000101,0b00111001}, // 5
	{0b00111100,0b01001010,0b01001001,0b01001001,0b00110000}, // 6
	{0b00000001,0b01110001,0b00001001,0b00000101,0b00000011}, // 7
	{0b00110110,0b01001001,0b01001001,0b01001001,0b00110110}, // 8
	{0b00000110,0b01001001,0b01001001,0b00101001,0b00011110}, // 9
	{0b00000000,0b00110110,0b00110110,0b00000000,0b00000000}, // :
	{0b00000000,0b01010110,0b00110110,0b00000000,0b00000000}, // ;
	{0b00000000,0b00001000,0b00010100,0b00100010,0b01000001}, // <
	{0b00010100,0b00010100,0b00010100,0b00010100,0b00010100}, // =
	{0b01000001,0b00100010,0b00010100,0b00001000,0b00000000}, // >
	{0b00000010,0b00000001,0b01010001,0b00001001,0b00000110}, // ?
	{0b00110010,0b01001001,0b01111001,0b01000001,0b00111110}, // @
	{0b01111110,0b00010001,0b00010001,0b00010001,0b01111110}, // A
	{0b01111111,0b01001001,0b01001001,0b01001001,0b00110110}, // B
	{0b00111110,0b01000001,0b01000001,0b01000001,0b00100010}, // C
	{0b01111111,0b01000001,0b01000001,0b00100010,0b00011100}, // D
	{0b01111111,0b01001001,0b01001001,0b01001001,0b01000001}, // E
	{0b01111111,0b00001001,0b00001001,0b00000001,0b00000001}, // F
	{0b00111110,0b01000001,0b01000001,0b01010001,0b00110010}, // G
	{0b01111111,0b00001000,0b00001000,0b00001000,0b01111111}, // H
	{0b00000000,0b01000001,0b01111111,0b01000001,0b00000000}, // I
	{0b00100000,0b01000000,0b01000001,0b00111111,0b00000001}, // J
	{0b01111111,0b00001000,0b00010100,0b00100010,0b01000001}, // K
	{0b01111111,0b01000000,0b01000000,0b01000000,0b01000000}, // L
	{0b01111111,0b00000010,0b00000100,0b00000010,0b01111111}, // M
	{0b01111111,0b00000100,0b00001000,0b00010000,0b01111111}, // N
	{0b00111110,0b01000001,0b01000001,0b01000001,0b00111110}, // O
	{0b01111111,0b00001001,0b00001001,0b00001001,0b00000110}, // P
	{0b00111110,0b01000001,0b01010001,0b00100001,0b01011110}, // Q
	{0b01111111,0b00001001,0b00011001,0b00101001,0b01000110}, // R
	{0b01000110,0b01001001,0b01001001,0b01001001,0b00110001}, // S
	{0b00000001,0b00000001,0b01111111,0b00000001,0b00000001}, // T
	{0b00111111,0b01000000,0b01000000,0b01000000,0b00111111}, // U
	{0b00011111,0b00100000,0b01000000,0b00100000,0b00011111}, // V
	{0b01111111,0b00100000,0b00011000,0b00100000,0b01111111}, // W
	{0b01100011,0b00010100,0b00001000,0b00010100,0b01100011}, // X
	{0b00000011,0b00000100,0b01111000,0b00000100,0b00000011}, // Y
	{0b01100001,0b01010001,0b01001001,0b01000101,0b01000011}, // Z
	{0b00000000,0b00000000,0b01111111,0b01000001,0b01000001}, // [
	{0b00000010,0b00000100,0b00001000,0b00010000,0b00100000}, // "\"
	{0b01000001,0b01000001,0b01111111,0b00000000,0b00000000}, // ]
	{0b00000100,0b00000010,0b00000001,0b00000010,0b00000100}, // ^
	{0b01000000,0b01000000,0b01000000,0b01000000,0b01000000}, // _
	{0b00000000,0b00000001,0b00000010,0b00000100,0b00000000}, // `
	{0b00100000,0b01010100,0b01010100,0b01010100,0b01111000}, // a
	{0b01111111,0b01001000,0b01000100,0b01000100,0b00111000}, // b
	{0b00111000,0b01000100,0b01000100,0b01000100,0b00100000}, // c
	{0b00111000,0b01000100,0b01000100,0b01001000,0b01111111}, // d
	{0b00111000,0b01010100,0b01010100,0b01010100,0b00011000}, // e
	{0b00001000,0b01111110,0b00001001,0b00000001,0b00000010}, // f
	{0b00001000,0b00010100,0b01010100,0b01010100,0b00111100}, // g
	{0b01111111,0b00001000,0b00000100,0b00000100,0b01111000}, // h
	{0b00000000,0b01000100,0b01111101,0b01000000,0b00000000}, // i
	{0b00100000,0b01000000,0b01000100,0b00111101,0b00000000}, // j
	{0b00000000,0b01111111,0b00010000,0b00101000,0b01000100}, // k
	{0b00000000,0b01000001,0b01111111,0b01000000,0b00000000}, // l
	{0b01111100,0b00000100,0b00011000,0b00000100,0b01111000}, // m
	{0b01111100,0b00001000,0b00000100,0b00000100,0b01111000}, // n
	{0b00111000,0b01000100,0b01000100,0b01000100,0b00111000}, // o
	{0b01111100,0b00010100,0b00010100,0b00010100,0b00001000}, // p
	{0b00001000,0b00010100,0b00010100,0b00011000,0b01111100}, // q
	{0b01111100,0b00001000,0b00000100,0b00000100,0b00001000}, // r
	{0b01001000,0b01010100,0b01010100,0b01010100,0b00100000}, // s
	{0b00000100,0b00111111,0b01000100,0b01000000,0b00100000}, // t
	{0b00111100,0b01000000,0b01000000,0b00100000,0b01111100}, // u
	{0b00011100,0b00100000,0b01000000,0b00100000,0b00011100}, // v
	{0b00111100,0b01000000,0b00110000,0b01000000,0b00111100}, // w
	{0b01000100,0b00101000,0b00010000,0b00101000,0b01000100}, // x
	{0b00001100,0b01010000,0b01010000,0b01010000,0b00111100}, // y
	{0b01000100,0b01100100,0b01010100,0b01001100,0b01000100}, // z
	{0b00000000,0b00001000,0b00110110,0b01000001,0b00000000}, //
	{0b00000000,0b00000000,0b01111111,0b00000000,0b00000000}, // |
	{0b00000000,0b01000001,0b00110110,0b00001000,0b00000000}, //
	{0b00000010,0b00000001,0b00000011,0b00000010,0b00000001} // ~
};

// Font 4x6 - Small
const unsigned char PROGMEM font4[95][4] = {
	{0b00000000,0b00000000,0b00000000,0b00000000}, //
	{0b00000000,0b01011100,0b00000000,0b00000000}, // !
	{0b00001100,0b00000000,0b00001100,0b00000000}, // "
	{0b01111100,0b00101000,0b01111100,0b00101000}, // #
	{0b01011000,0b11011100,0b01101000,0b00000000}, // $
	{0b00100100,0b00010000,0b01001000,0b00000000}, // %
	{0b00101000,0b01010100,0b00101000,0b01000000}, // &
	{0b00000000,0b00001100,0b00000000,0b00000000}, // '
	{0b00000000,0b01111000,0b10000100,0b00000000}, // (
	{0b10000100,0b01111000,0b00000000,0b00000000}, // )
	{0b01010100,0b00111000,0b01010100,0b00000000}, // *
	{0b00010000,0b01111100,0b00010000,0b00000000}, // +
	{0b10000000,0b01000000,0b00000000,0b00000000}, // ,
	{0b00010000,0b00010000,0b00010000,0b00000000}, // -
	{0b00000000,0b01000000,0b00000000,0b00000000}, // .
	{0b01100000,0b00010000,0b00001100,0b00000000}, // /
	{0b00111000,0b01010100,0b00111000,0b00000000}, // 0
	{0b01001000,0b01111100,0b01000000,0b00000000}, // 1
	{0b01001000,0b01100100,0b01011000,0b00000000}, // 2
	{0b01000100,0b01010100,0b00101100,0b00000000}, // 3
	{0b00011100,0b00010000,0b01111100,0b00000000}, // 4
	{0b01011100,0b01010100,0b00100100,0b00000000}, // 5
	{0b00111000,0b01010100,0b00100100,0b00000000}, // 6
	{0b01100100,0b00010100,0b00001100,0b00000000}, // 7
	{0b01101000,0b01010100,0b00101100,0b00000000}, // 8
	{0b01001000,0b01010100,0b00111000,0b00000000}, // 9
	{0b00000000,0b01001000,0b00000000,0b00000000}, // :
	{0b10000000,0b01001000,0b00000000,0b00000000}, // ;
	{0b00010000,0b00101000,0b01000100,0b00000000}, // <
	{0b00101000,0b00101000,0b00101000,0b00000000}, // =
	{0b01000100,0b00101000,0b00010000,0b00000000}, // >
	{0b00000100,0b01010100,0b00001000,0b00000000}, // ?
	{0b00111000,0b01000100,0b01011100,0b00000000}, // @
	{0b01111000,0b00010100,0b01111000,0b00000000}, // A
	{0b01111100,0b01010100,0b00101000,0b00000000}, // B
	{0b00111000,0b01000100,0b00101000,0b00000000}, // C
	{0b01111100,0b01000100,0b00111000,0b00000000}, // D
	{0b01111100,0b01010100,0b01000100,0b00000000}, // E
	{0b01111100,0b00010100,0b00000100,0b00000000}, // F
	{0b00111000,0b01000100,0b01110100,0b00000000}, // G
	{0b01111100,0b00010000,0b01111100,0b00000000}, // H
	{0b01000100,0b01111100,0b01000100,0b00000000}, // I
	{0b00100000,0b01000000,0b00111100,0b00000000}, // J
	{0b01111100,0b00010000,0b01101100,0b00000000}, // K
	{0b01111100,0b01000000,0b01000000,0b00000000}, // L
	{0b01111100,0b00011000,0b01111100,0b00000000}, // M
	{0b01111000,0b00010000,0b00111100,0b00000000}, // N
	{0b00111000,0b01000100,0b00111000,0b00000000}, // O
	{0b01111100,0b00010100,0b00001000,0b00000000}, // P
	{0b00111000,0b01000100,0b10111000,0b00000000}, // Q
	{0b01111100,0b00010100,0b01101000,0b00000000}, // R
	{0b01001000,0b01010100,0b00100100,0b00000000}, // S
	{0b00000100,0b01111100,0b00000100,0b00000000}, // T
	{0b01111100,0b01000000,0b01111100,0b00000000}, // U
	{0b00111100,0b01100000,0b00111100,0b00000000}, // V
	{0b01111100,0b00110000,0b01111100,0b00000000}, // W
	{0b01101100,0b00010000,0b01101100,0b00000000}, // X
	{0b00001100,0b01110000,0b00001100,0b00000000}, // Y
	{0b01100100,0b01010100,0b01001100,0b00000000}, // Z
	{0b00000000,0b01111100,0b01000100,0b00000000}, // [
	{0b00001100,0b00010000,0b01100000,0b00000000}, // "\"
	{0b01000100,0b01111100,0b00000000,0b00000000}, // ]
	{0b00001000,0b00000100,0b00001000,0b00000000}, // ^
	{0b10000000,0b10000000,0b10000000,0b00000000}, // _
	{0b00000000,0b00000100,0b00001000,0b00000000}, // `
	{0b00110000,0b01001000,0b01111000,0b00000000}, // a
	{0b01111100,0b01001000,0b00110000,0b00000000}, // b
	{0b00110000,0b01001000,0b01001000,0b00000000}, // c
	{0b00110000,0b01001000,0b01111100,0b00000000}, // d
	{0b00110000,0b01101000,0b01010000,0b00000000}, // e
	{0b00010000,0b01111000,0b00010100,0b00000000}, // f
	{0b10010000,0b10101000,0b01111000,0b00000000}, // g
	{0b01111100,0b00001000,0b01110000,0b00000000}, // h
	{0b01010000,0b01110100,0b01000000,0b00000000}, // i
	{0b10000000,0b10000000,0b01110100,0b00000000}, // j
	{0b01111100,0b00010000,0b01101000,0b00000000}, // k
	{0b01000100,0b01111100,0b01000000,0b00000000}, // l
	{0b01111000,0b00010000,0b01111000,0b00000000}, // m
	{0b01111000,0b00001000,0b01110000,0b00000000}, // n
	{0b00110000,0b01001000,0b00110000,0b00000000}, // o
	{0b11111000,0b00101000,0b00010000,0b00000000}, // p
	{0b00110000,0b01001000,0b11111000,0b00000000}, // q
	{0b01111000,0b00010000,0b00001000,0b00000000}, // r
	{0b01010000,0b01011000,0b00101000,0b00000000}, // s
	{0b00001000,0b00111100,0b01001000,0b00000000}, // t
	{0b00111000,0b01000000,0b01111000,0b00000000}, // u
	{0b00111000,0b01000000,0b00111000,0b00000000}, // v
	{0b01111000,0b00100000,0b01111000,0b00000000}, // w
	{0b01001000,0b00110000,0b01001000,0b00000000}, // x
	{0b10011000,0b10100000,0b01111000,0b00000000}, // y
	{0b01001000,0b01101000,0b01011000,0b00000000}, // z
	{0b00010000,0b01111000,0b10000100,0b00000000}, //
	{0b00000000,0b01111100,0b00000000,0b00000000}, // |
	{0b10000100,0b01111000,0b00010000,0b00000000}, //
	{0b00001000,0b00000100,0b00001000,0b00000100} // ~
};


typedef enum add_mode_e{
	HORIZONTAL_ADD_MODE,
	VERTICAL_ADD_MODE,
	PAGE_ADD_MODE
} add_mode;

void oled_init()
{
	oled_control_write(0xae); //display off
	oled_control_write(0xa1); //segment remap
	oled_control_write(0xda); //common pads hardware: alternative ????
	oled_control_write(0x12);
	oled_control_write(0xc8); //common output scan direction:com63~com0
	oled_control_write(0xa8); //multiplex ration mode:63
	oled_control_write(0x3f);
	oled_control_write(0xd5); //display divide ratio/osc. freq. mode
	oled_control_write(0x80);
	oled_control_write(0x81); //contrast control
	oled_control_write(0x50);
	oled_control_write(0xd9); //set pre-charge period
	oled_control_write(0x21);
	oled_control_write(0x20); //Set Memory Addressing Mode PAGE MODE
	oled_control_write(0x02);
	oled_control_write(0xdb); //VCOM deselect level mode
	oled_control_write(0x30);
	oled_control_write(0xad); //master configuration
	oled_control_write(0x00);
	oled_control_write(0xa4); //out follows RAM content
	oled_control_write(0xa6); //set normal display
	oled_control_write(0xaf); // display on
	
	oled_clear_screen();
}
void oled_set_add_mode(add_mode add_mode_p) {
	oled_control_write(0x20); //Set Memory Addressing Mode
	oled_control_write(add_mode_p);
}

void oled_columb_range_select(uint8_t start, uint8_t end){
	oled_control_write(OLED_COLUMB_SET);
	if (start < OLED_COLUMBS){
		oled_control_write(start);
	}
	else{
		oled_control_write(OLED_COLUMBS-1);
	}
	
	if (end < OLED_COLUMBS){
		oled_control_write(end);
	}
	else{
		oled_control_write(OLED_COLUMBS-1);
	}
}

void oled_page_select(uint8_t page){
	oled_control_write(OLED_PAGE_SET);
	if (page < OLED_PAGES){
		oled_control_write(page);
		oled_control_write(page);
	}
	else{
		oled_control_write(OLED_PAGES-1);
		oled_control_write(OLED_PAGES-1);
	}
}

void oled_page_select_range(uint8_t start_page, uint8_t end_page){
	oled_control_write(OLED_PAGE_SET);
	if (end_page < OLED_PAGES){
		oled_control_write(start_page);
		oled_control_write(end_page);
	}
	else{
		oled_control_write(OLED_PAGES-1);
		oled_control_write(OLED_PAGES-1);
	}
}

void oled_clear_page(uint8_t page){
	if (page < OLED_PAGES){
		oled_page_select(page);
		oled_columb_range_select(0,OLED_COLUMBS-1);		
		for (int i = 0;i<OLED_COLUMBS;i++){
			oled_data_write(0x00);
		}
	}
}

void oled_chess() {
	for (int i = 0; i < 128/8;i++){
		for(int j = 0; j < 6; j++) {
			oled_set_value_range(j,i*16+(j%2)*8,i*16+8+(j%2)*8,0xd0);
		}
	}
}

void oled_clear_screen(){
	for (int i = 0;i<OLED_PAGES;i++){
		oled_clear_page(i);
	}
}

void oled_set_value_range(uint8_t page,  uint8_t start, uint8_t end,uint8_t val){
	oled_columb_range_select(start,end);
	oled_page_select(page);
	for (int i = start; i <= end;i++){
		oled_data_write(val);
	}
}


void oled_white_screen(){
	for (int page = 0; page<OLED_PAGES;page++){
		oled_set_value_range(page,0,OLED_COLUMBS-1,0xff);
	}
	
}

void oled_data_write(uint8_t data){
	volatile uint8_t *adress = OLED_DATA_OFFSET;
	*adress = data;
}

void oled_control_write(uint8_t data){
	volatile uint8_t *adress = OLED_CMD_OFFSET;
	*adress = data;	
}

bool printf_inverted = false;

void oled_printf_inverted() {
	printf_inverted = true;
}

void oled_printf_normal() {
	printf_inverted = false;
}



uint8_t printf_page = 0;
uint8_t printf_size = 0;

void oled_set_printf_page(uint8_t page) {
	printf_page = page;
	oled_page_select(printf_page);
}

void oled_set_printf_size(uint8_t size) {
	printf_size = size;
}

uint8_t oled_print_char(char letter) {
	if(letter == '\n') {
		printf_page+=1;
		oled_page_select(printf_page);
		oled_columb_range_select(0, OLED_COLUMBS);
	} else {
		oled_print_char_of_size(letter, printf_size);
		uint8_t columb_adder = 0;
	}
	return 0;
}

uint8_t oled_printf_dummy_recieve(){
	return 0;
	
}


void oled_print_char_of_size(char letter,  uint8_t size) {
	uint8_t char_length = 0;
	unsigned char * letter_bitmap;
	if(size == FONT_SIZE_SMALL) {
		char_length = 4;
		letter_bitmap = font4[letter - ' '];
	} else if(size == FONT_SIZE_MEDIUM) {
		char_length = 5;
		letter_bitmap = font5[letter - ' '];
	} else{
		char_length = 8;
		letter_bitmap = font8[letter - ' '];
	}
	for(int i = 0; i < char_length; i++) {
		if(!printf_inverted) {
			oled_data_write(pgm_read_byte(&(letter_bitmap[i])));
		} else {
			oled_data_write(~pgm_read_byte(&(letter_bitmap[i])));
		}
	}
}



#define BIG_SIZE 4

uint8_t big_char_start_x = 0;
uint8_t big_char_start_y = 0;

void oled_print_char_big_set_start(uint8_t x_pos, uint8_t y_pos) {
	big_char_start_x = x_pos;
	big_char_start_y = y_pos;
}

uint8_t oled_print_char_big(char letter) {
	oled_set_add_mode(VERTICAL_ADD_MODE);
	uint8_t char_length = 0;
	unsigned char ** letter_bitmap = font8;
	char_length = 8;
	oled_columb_range_select(big_char_start_x, big_char_start_x+8*4-1);
	oled_page_select_range(big_char_start_y, big_char_start_y+3);
	
		for(int i = 0; i < 8; i++) {
			uint8_t bit_map = pgm_read_byte(&(font8[letter - ' '][i]));
			for(int t = 0; t < 4; t++) {
				for (int y = 0; y < 8; y+=2) {
					oled_data_write(((bit_map & (1 << y+1)) > 0) * 0xf0 | ((bit_map & (1 << y)) > 0)*0x0f);
				}
			}
		}
	
	big_char_start_x += 8*4;
	oled_set_add_mode(PAGE_ADD_MODE);
	return 0;
}

void oled_set_contrast(int8_t contrast_p) {
	uint8_t contrast = contrast_p+128;
	oled_control_write(0x81);
	oled_control_write(contrast);
}